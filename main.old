from fastapi import FastAPI

app = FastAPI()


@app.get("/")
async def root():
    return {"message": "Hello World"}


# Endpoint for searching for tabler icon codes by keyword
@app.get("/search/{keyword}")
def search(keyword: str):
    return {
        "icons": [
            {
                "icon-name": keyword,
                "hex-code": "f2f2",
                "similarity-score": "0.229",
            }
        ]
    }


icon_data = [
    {
        "icon_name": "subtraction",
        "hex_code": "e00d",
        "similarity_score": 0.1023,
    },
    {
        "icon_name": "calculator",
        "hex_code": "f2f2",
        "similarity_score": 0.229,
    },
    {
        "icon_name": "addition",
        "hex_code": "f00d",
        "similarity_score": 0.1123,
    },
]


@app.get("/icon/search/{keyword}")
def icon_search(keyword: str, limit: int = 2):
    sorted_icon_data = icon_data.copy()
    sorted_icon_data.sort(key=lambda x: x["similarity_score"], reverse=True)
    return sorted_icon_data[:limit]
